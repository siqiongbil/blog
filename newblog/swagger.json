{
  "openapi": "3.0.0",
  "info": {
    "title": "思琼碧落的博客系统 API",
    "description": "个人博客系统的完整REST API文档，支持用户管理、文章发布、分类管理、音乐分享和系统配置等功能。v2.1.0更新：修复了用户角色和配置类型定义，补充了缺失的API接口。",
    "version": "2.1.0",
    "contact": {
      "name": "思琼碧落",
      "email": "zzb@siqiongbiluo.love",
      "url": "https://siqiongbiluo.love"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:9000/api",
      "description": "本地开发环境"
    },
    {
      "url": "https://siqiongbiluo.love/api",
      "description": "生产环境"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT认证，请在请求头中添加：Authorization: Bearer {token}"
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "用户ID"
          },
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "admin"
          },
          "nickname": {
            "type": "string",
            "description": "昵称",
            "example": "思琼碧落"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "邮箱",
            "example": "zzb@siqiongbiluo.love"
          },
          "avatar": {
            "type": "string",
            "description": "头像URL",
            "nullable": true
          },
          "bio": {
            "type": "string",
            "description": "个人简介",
            "nullable": true
          },
          "website": {
            "type": "string",
            "description": "个人网站",
            "nullable": true
          },
          "github": {
            "type": "string",
            "description": "GitHub用户名",
            "nullable": true
          },
          "role": {
            "type": "integer",
            "description": "用户角色：1-管理员，2-博主，3-普通用户",
            "enum": [1, 2, 3]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Category": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "分类ID"
          },
          "name": {
            "type": "string",
            "description": "分类名称",
            "example": "技术文章"
          },
          "slug": {
            "type": "string",
            "description": "分类别名（用于URL）",
            "example": "tech"
          },
          "description": {
            "type": "string",
            "description": "分类描述",
            "nullable": true
          },
          "sort_order": {
            "type": "integer",
            "description": "排序顺序",
            "default": 0
          },
          "image_url": {
            "type": "string",
            "description": "分类图片URL",
            "nullable": true,
            "example": "/static/image/tech-category.jpg"
          },
          "article_count": {
            "type": "integer",
            "description": "该分类下的文章数量（仅在统计接口中返回）"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "CategoryInput": {
        "type": "object",
        "required": ["name", "slug"],
        "properties": {
          "name": {
            "type": "string",
            "description": "分类名称",
            "maxLength": 50,
            "example": "技术文章"
          },
          "slug": {
            "type": "string",
            "description": "分类别名（用于URL）",
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "example": "tech"
          },
          "description": {
            "type": "string",
            "description": "分类描述",
            "maxLength": 255,
            "nullable": true
          },
          "sort_order": {
            "type": "integer",
            "description": "排序顺序",
            "default": 0,
            "minimum": 0
          },
          "image_url": {
            "type": "string",
            "description": "分类图片URL",
            "nullable": true,
            "example": "/static/image/tech-category.jpg"
          }
        }
      },
      "Article": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "文章ID"
          },
          "title": {
            "type": "string",
            "description": "文章标题",
            "example": "如何使用Docker部署博客系统"
          },
          "content": {
            "type": "string",
            "description": "文章内容"
          },
          "summary": {
            "type": "string",
            "description": "文章摘要",
            "nullable": true
          },
          "cover_image": {
            "type": "string",
            "description": "封面图片URL",
            "nullable": true
          },
          "category_id": {
            "type": "integer",
            "description": "分类ID"
          },
          "author_id": {
            "type": "integer",
            "description": "作者ID"
          },
          "status": {
            "type": "integer",
            "description": "文章状态：0-草稿，1-已发布，2-已删除",
            "enum": [0, 1, 2],
            "default": 0
          },
          "view_count": {
            "type": "integer",
            "description": "浏览次数",
            "default": 0
          },
          "tags": {
            "type": "array",
            "description": "文章关联的标签列表",
            "items": {
              "$ref": "#/components/schemas/Tag"
            },
            "example": [
              {
                "id": 1,
                "name": "Docker",
                "slug": "docker",
                "color": "#007bff",
                "article_count": 5
              },
              {
                "id": 2,
                "name": "部署",
                "slug": "deploy",
                "color": "#28a745",
                "article_count": 8
              }
            ]
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          },
          "author_username": {
            "type": "string",
            "description": "作者用户名（关联查询）"
          },
          "author_nickname": {
            "type": "string",
            "description": "作者昵称（关联查询）"
          },
          "category_name": {
            "type": "string",
            "description": "分类名称（关联查询）"
          },
          "category_slug": {
            "type": "string",
            "description": "分类别名（关联查询）"
          }
        }
      },
      "ArticleInput": {
        "type": "object",
        "required": ["title", "content", "category_id"],
        "properties": {
          "title": {
            "type": "string",
            "description": "文章标题",
            "maxLength": 255,
            "example": "如何使用Docker部署博客系统"
          },
          "content": {
            "type": "string",
            "description": "文章内容",
            "example": "本文将介绍如何使用Docker部署个人博客系统..."
          },
          "summary": {
            "type": "string",
            "description": "文章摘要",
            "maxLength": 500,
            "nullable": true
          },
          "cover_image": {
            "type": "string",
            "description": "封面图片URL",
            "nullable": true
          },
          "category_id": {
            "type": "integer",
            "description": "分类ID",
            "example": 1
          },
          "status": {
            "type": "integer",
            "description": "文章状态：0-草稿，1-已发布",
            "enum": [0, 1],
            "default": 0
          },
          "tags": {
            "oneOf": [
              {
                "type": "array",
                "description": "标签名称数组（自动创建不存在的标签）",
                "items": {
                  "type": "string"
                },
                "example": ["Docker", "部署", "博客"]
              },
              {
                "type": "array",
                "description": "标签ID数组",
                "items": {
                  "type": "integer"
                },
                "example": [1, 2, 3]
              }
            ],
            "description": "文章标签，支持标签名称数组或标签ID数组两种格式",
            "nullable": true
          }
        }
      },

      "SystemConfig": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "配置ID"
          },
          "config_key": {
            "type": "string",
            "description": "配置键名",
            "example": "site_name"
          },
          "config_value": {
            "type": "string",
            "description": "配置值",
            "example": "思琼碧落的博客"
          },
          "config_type": {
            "type": "integer",
            "description": "配置类型：1-字符串，2-数字，3-JSON，4-布尔值",
            "enum": [1, 2, 3, 4],
            "default": 1
          },
          "description": {
            "type": "string",
            "description": "配置描述",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Image": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "图片ID"
          },
          "file_name": {
            "type": "string",
            "description": "文件名",
            "example": "1734567890_image.jpg"
          },
          "original_name": {
            "type": "string",
            "description": "原始文件名",
            "example": "my-image.jpg"
          },
          "file_path": {
            "type": "string",
            "description": "文件路径",
            "example": "./image/1734567890_image.jpg"
          },
          "file_url": {
            "type": "string",
            "description": "访问URL",
            "example": "/static/image/1734567890_image.jpg"
          },
          "file_size": {
            "type": "integer",
            "description": "文件大小（字节）",
            "example": 1024000
          },
          "mime_type": {
            "type": "string",
            "description": "MIME类型",
            "example": "image/jpeg"
          },
          "width": {
            "type": "integer",
            "description": "图片宽度（像素）",
            "example": 1920
          },
          "height": {
            "type": "integer",
            "description": "图片高度（像素）",
            "example": 1080
          },
          "alt_text": {
            "type": "string",
            "description": "替代文本",
            "nullable": true,
            "example": "美丽的风景图片"
          },
          "description": {
            "type": "string",
            "description": "图片描述",
            "nullable": true,
            "example": "这是一张在海边拍摄的日落照片"
          },
          "tags": {
            "type": "array",
            "description": "图片标签",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "example": ["风景", "日落", "海边"]
          },
          "upload_type": {
            "type": "integer",
            "description": "上传类型：1-分类图片，2-文章图片，3-用户头像，4-其他",
            "enum": [1, 2, 3, 4],
            "example": 1
          },
          "related_id": {
            "type": "integer",
            "description": "关联ID（分类ID、文章ID等）",
            "nullable": true,
            "example": 123
          },
          "uploader_id": {
            "type": "integer",
            "description": "上传者ID"
          },
          "uploader_username": {
            "type": "string",
            "description": "上传者用户名（关联查询）",
            "example": "admin"
          },
          "status": {
            "type": "integer",
            "description": "状态：0-删除，1-正常",
            "enum": [0, 1],
            "default": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "ImageInput": {
        "type": "object",
        "properties": {
          "alt_text": {
            "type": "string",
            "description": "替代文本",
            "maxLength": 255,
            "example": "美丽的风景图片"
          },
          "description": {
            "type": "string",
            "description": "图片描述",
            "example": "这是一张在海边拍摄的日落照片"
          },
          "tags": {
            "type": "array",
            "description": "图片标签",
            "items": {
              "type": "string"
            },
            "example": ["风景", "日落", "海边"]
          },
          "upload_type": {
            "type": "integer",
            "description": "上传类型：1-分类图片，2-文章图片，3-用户头像，4-其他",
            "enum": [1, 2, 3, 4],
            "default": 1
          },
          "related_id": {
            "type": "integer",
            "description": "关联ID（分类ID、文章ID等）",
            "nullable": true
          }
        }
      },
      "Music": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "音乐ID"
          },
          "file_name": {
            "type": "string",
            "description": "文件名",
            "example": "1734567890_song.mp3"
          },
          "original_name": {
            "type": "string",
            "description": "原始文件名",
            "example": "Beautiful Song.mp3"
          },
          "file_path": {
            "type": "string",
            "description": "文件路径",
            "example": "./music/1734567890_song.mp3"
          },
          "file_url": {
            "type": "string",
            "description": "访问URL",
            "example": "/static/music/1734567890_song.mp3"
          },
          "file_size": {
            "type": "integer",
            "description": "文件大小（字节）",
            "example": 5242880
          },
          "mime_type": {
            "type": "string",
            "description": "MIME类型",
            "example": "audio/mpeg"
          },
          "duration": {
            "type": "number",
            "description": "音乐时长（秒）",
            "nullable": true,
            "example": 180.5
          },
          "title": {
            "type": "string",
            "description": "音乐标题",
            "nullable": true,
            "example": "Beautiful Song"
          },
          "artist": {
            "type": "string",
            "description": "艺术家",
            "nullable": true,
            "example": "John Doe"
          },
          "album": {
            "type": "string",
            "description": "专辑名称",
            "nullable": true,
            "example": "Greatest Hits"
          },
          "genre": {
            "type": "string",
            "description": "音乐类型",
            "nullable": true,
            "example": "Pop"
          },
          "year": {
            "type": "integer",
            "description": "发行年份",
            "nullable": true,
            "example": 2023
          },
          "cover_url": {
            "type": "string",
            "description": "专辑封面URL",
            "nullable": true,
            "example": "/static/image/album-cover.jpg"
          },
          "description": {
            "type": "string",
            "description": "音乐描述",
            "nullable": true,
            "example": "一首非常好听的歌曲"
          },
          "tags": {
            "type": "array",
            "description": "音乐标签",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "example": ["流行", "经典", "好听"]
          },
          "play_count": {
            "type": "integer",
            "description": "播放次数",
            "default": 0,
            "example": 100
          },
          "uploader_id": {
            "type": "integer",
            "description": "上传者ID"
          },
          "uploader_username": {
            "type": "string",
            "description": "上传者用户名（关联查询）",
            "example": "admin"
          },
          "status": {
            "type": "integer",
            "description": "状态：0-禁用，1-启用",
            "enum": [0, 1],
            "default": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "File": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "文件ID"
          },
          "file_name": {
            "type": "string",
            "description": "文件名",
            "example": "1734567890_document.pdf"
          },
          "original_name": {
            "type": "string",
            "description": "原始文件名",
            "example": "重要文档.pdf"
          },
          "file_path": {
            "type": "string",
            "description": "文件路径",
            "example": "./files/1734567890_document.pdf"
          },
          "file_url": {
            "type": "string",
            "description": "访问URL",
            "example": "/static/files/1734567890_document.pdf"
          },
          "file_size": {
            "type": "integer",
            "description": "文件大小（字节）",
            "example": 2048000
          },
          "mime_type": {
            "type": "string",
            "description": "MIME类型",
            "example": "application/pdf"
          },
          "file_type": {
            "type": "string",
            "description": "文件类型",
            "enum": ["document", "video", "audio", "archive", "other"],
            "example": "document"
          },
          "description": {
            "type": "string",
            "description": "文件描述",
            "nullable": true,
            "example": "这是一个重要的技术文档"
          },
          "tags": {
            "type": "array",
            "description": "文件标签",
            "items": {
              "type": "string"
            },
            "nullable": true,
            "example": ["技术", "文档", "重要"]
          },
          "uploader_id": {
            "type": "integer",
            "description": "上传者ID"
          },
          "uploader_username": {
            "type": "string",
            "description": "上传者用户名（关联查询）",
            "example": "admin"
          },
          "related_id": {
            "type": "integer",
            "description": "关联ID（文章ID、分类ID等）",
            "nullable": true,
            "example": 123
          },
          "download_count": {
            "type": "integer",
            "description": "下载次数",
            "default": 0,
            "example": 50
          },
          "status": {
            "type": "integer",
            "description": "状态：0-删除，1-正常",
            "enum": [0, 1],
            "default": 1
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "Tag": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "标签ID"
          },
          "name": {
            "type": "string",
            "description": "标签名称",
            "example": "Docker"
          },
          "slug": {
            "type": "string",
            "description": "标签别名（用于URL）",
            "example": "docker"
          },
          "description": {
            "type": "string",
            "description": "标签描述",
            "nullable": true,
            "example": "容器技术相关文章"
          },
          "color": {
            "type": "string",
            "description": "标签颜色（十六进制格式）",
            "default": "#007bff",
            "example": "#007bff"
          },
          "icon": {
            "type": "string",
            "description": "标签图标（CSS类名或图标名）",
            "nullable": true,
            "example": "fab fa-docker"
          },
          "article_count": {
            "type": "integer",
            "description": "使用该标签的文章数量",
            "default": 0,
            "example": 5
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "创建时间"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "更新时间"
          }
        }
      },
      "TagInput": {
        "type": "object",
        "required": ["name", "slug"],
        "properties": {
          "name": {
            "type": "string",
            "description": "标签名称",
            "maxLength": 50,
            "example": "Docker"
          },
          "slug": {
            "type": "string",
            "description": "标签别名（用于URL）",
            "maxLength": 50,
            "pattern": "^[a-z0-9-]+$",
            "example": "docker"
          },
          "description": {
            "type": "string",
            "description": "标签描述",
            "maxLength": 255,
            "nullable": true,
            "example": "容器技术相关文章"
          },
          "color": {
            "type": "string",
            "description": "标签颜色（十六进制格式）",
            "pattern": "^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",
            "default": "#007bff",
            "example": "#007bff"
          },
          "icon": {
            "type": "string",
            "description": "标签图标（CSS类名或图标名）",
            "maxLength": 50,
            "nullable": true,
            "example": "fab fa-docker"
          }
        }
      },
      "LoginRequest": {
        "type": "object",
        "required": ["username", "password"],
        "properties": {
          "username": {
            "type": "string",
            "description": "用户名",
            "example": "admin"
          },
          "password": {
            "type": "string",
            "description": "密码",
            "example": "594zzb"
          }
        }
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "登录成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "token": {
                "type": "string",
                "description": "JWT访问令牌",
                "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              },
              "user": {
                "$ref": "#/components/schemas/User"
              }
            }
          }
        }
      },
      "SuccessResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "操作成功"
          },
          "data": {
            "type": "object",
            "description": "响应数据"
          }
        }
      },
      "ErrorResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "message": {
            "type": "string",
            "example": "操作失败"
          },
          "error": {
            "type": "string",
            "description": "错误详情"
          }
        }
      },
      "PaginationResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "data": {
            "type": "object",
            "properties": {
              "pagination": {
                "type": "object",
                "properties": {
                  "current": {
                    "type": "integer",
                    "description": "当前页码",
                    "example": 1
                  },
                  "pageSize": {
                    "type": "integer",
                    "description": "每页数量",
                    "example": 10
                  },
                  "total": {
                    "type": "integer",
                    "description": "总记录数",
                    "example": 100
                  },
                  "pages": {
                    "type": "integer",
                    "description": "总页数",
                    "example": 10
                  }
                }
              }
            }
          }
        }
      },
      "UploadResponse": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": true
          },
          "message": {
            "type": "string",
            "example": "文件上传成功"
          },
          "data": {
            "type": "object",
            "properties": {
              "image_url": {
                "type": "string",
                "description": "上传后的文件URL",
                "example": "/static/image/1734567890_abc123.jpg"
              },
              "original_name": {
                "type": "string",
                "description": "原始文件名",
                "example": "category-image.jpg"
              },
              "size": {
                "type": "integer",
                "description": "文件大小（字节）",
                "example": 1024000
              }
            }
          }
        }
      },
      "Pagination": {
        "type": "object",
        "properties": {
          "current": {
            "type": "integer",
            "description": "当前页码",
            "example": 1
          },
          "pageSize": {
            "type": "integer",
            "description": "每页数量",
            "example": 10
          },
          "total": {
            "type": "integer",
            "description": "总记录数",
            "example": 100
          },
          "pages": {
            "type": "integer",
            "description": "总页数",
            "example": 10
          }
        }
      }
    }
  },
  "paths": {
    "/": {
      "get": {
        "tags": ["系统信息"],
        "summary": "获取API基本信息",
        "description": "获取博客系统的基本信息和版本",
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": { "type": "string", "example": "思琼碧落的博客" },
                    "description": { "type": "string", "example": "个人博客系统API服务" },
                    "version": { "type": "string", "example": "1.0.0" },
                    "author": { "type": "string", "example": "思琼碧落" },
                    "documentation": { "type": "string", "example": "/api/info" },
                    "environment": { "type": "string", "example": "development" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": ["系统信息"],
        "summary": "API健康检查",
        "description": "检查API服务运行状态",
        "responses": {
          "200": {
            "description": "服务正常",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "API服务运行正常" },
                    "timestamp": { "type": "string", "format": "date-time" },
                    "version": { "type": "string", "example": "1.0.0" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/info": {
      "get": {
        "tags": ["系统信息"],
        "summary": "获取API详细信息",
        "description": "获取API的详细信息和端点列表",
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "name": { "type": "string", "example": "个人博客API" },
                        "version": { "type": "string", "example": "1.0.0" },
                        "description": {
                          "type": "string",
                          "example": "提供博客系统的完整REST API服务"
                        },
                        "endpoints": {
                          "type": "object",
                          "description": "API端点列表"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/users/login": {
      "post": {
        "tags": ["用户管理"],
        "summary": "用户登录",
        "description": "用户登录获取JWT令牌",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "登录成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "400": {
            "description": "用户名或密码错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/profile": {
      "get": {
        "tags": ["用户管理"],
        "summary": "获取当前用户信息",
        "description": "获取当前登录用户的个人信息",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["用户管理"],
        "summary": "更新用户信息",
        "description": "更新当前用户的个人信息",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nickname": { "type": "string", "example": "思琼碧落" },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "zzb@siqiongbiluo.love"
                  },
                  "avatar": { "type": "string", "nullable": true },
                  "bio": { "type": "string", "nullable": true },
                  "website": { "type": "string", "nullable": true },
                  "github": { "type": "string", "nullable": true }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/change-password": {
      "put": {
        "tags": ["用户管理"],
        "summary": "修改密码",
        "description": "修改当前用户的登录密码",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["currentPassword", "newPassword"],
                "properties": {
                  "currentPassword": { "type": "string", "description": "当前密码" },
                  "newPassword": { "type": "string", "description": "新密码", "minLength": 6 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "密码修改成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "当前密码错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/me": {
      "get": {
        "tags": ["用户管理"],
        "summary": "获取当前用户信息",
        "description": "获取当前登录用户的个人信息（与/users/profile相同）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/me/password": {
      "put": {
        "tags": ["用户管理"],
        "summary": "修改当前用户密码",
        "description": "修改当前用户的登录密码（与/users/change-password相同）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["currentPassword", "newPassword"],
                "properties": {
                  "currentPassword": { "type": "string", "description": "当前密码" },
                  "newPassword": { "type": "string", "description": "新密码", "minLength": 6 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "密码修改成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "当前密码错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": ["用户管理"],
        "summary": "获取用户列表",
        "description": "获取所有用户列表（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "users": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/User" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/{id}": {
      "get": {
        "tags": ["用户管理"],
        "summary": "获取指定用户信息",
        "description": "根据用户ID获取用户信息",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "用户ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/User" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "用户不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["用户管理"],
        "summary": "更新用户信息",
        "description": "更新指定用户的信息（需要管理员权限或用户本人）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "用户ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "nickname": { "type": "string", "example": "思琼碧落" },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "example": "zzb@siqiongbiluo.love"
                  },
                  "avatar": { "type": "string", "nullable": true },
                  "bio": { "type": "string", "nullable": true },
                  "website": { "type": "string", "nullable": true },
                  "github": { "type": "string", "nullable": true }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "无权限操作",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["用户管理"],
        "summary": "删除用户",
        "description": "删除指定用户（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "用户ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/users/{id}/password": {
      "put": {
        "tags": ["用户管理"],
        "summary": "修改指定用户密码",
        "description": "修改指定用户的密码（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "用户ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["newPassword"],
                "properties": {
                  "newPassword": { "type": "string", "description": "新密码", "minLength": 6 }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "密码修改成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories": {
      "get": {
        "tags": ["分类管理"],
        "summary": "获取分类列表",
        "description": "获取博客分类列表，支持分页和不分页",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码（启用分页）",
            "schema": { "type": "integer", "minimum": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100 }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["sort_order", "created_at", "name"],
              "default": "sort_order"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "ASC" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "categories": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Category" }
                        },
                        "pagination": {
                          "type": "object",
                          "description": "分页信息（仅在分页查询时返回）",
                          "properties": {
                            "current": { "type": "integer" },
                            "pageSize": { "type": "integer" },
                            "total": { "type": "integer" },
                            "pages": { "type": "integer" }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["分类管理"],
        "summary": "创建分类",
        "description": "创建新的博客分类（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "分类创建成功" },
                    "data": { "$ref": "#/components/schemas/Category" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误或分类别名已存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "401": {
            "description": "未授权",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories/{id}": {
      "get": {
        "tags": ["分类管理"],
        "summary": "获取分类详情",
        "description": "根据ID获取分类详细信息",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "分类ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Category" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["分类管理"],
        "summary": "更新分类",
        "description": "更新分类信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "分类ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CategoryInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["分类管理"],
        "summary": "删除分类",
        "description": "删除指定分类（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "分类ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories/upload/image": {
      "post": {
        "tags": ["分类管理"],
        "summary": "上传分类图片",
        "description": "上传分类图片文件（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "图片文件（支持jpg、png、gif、webp等格式）"
                  },
                  "file_name": {
                    "type": "string",
                    "description": "指定的文件名（可选），如果不提供则自动生成唯一文件名",
                    "example": "category-image.jpg"
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UploadResponse"
                }
              }
            }
          },
          "400": {
            "description": "文件格式不支持或文件过大",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories/{id}/image": {
      "delete": {
        "tags": ["分类管理"],
        "summary": "删除分类图片",
        "description": "删除指定分类的图片（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "分类ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/categories/slug/{slug}": {
      "get": {
        "tags": ["分类管理"],
        "summary": "根据别名获取分类信息",
        "description": "根据分类别名获取分类详细信息",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "分类别名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Category" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/categories/stats/article-count": {
      "get": {
        "tags": ["分类管理"],
        "summary": "获取分类文章统计",
        "description": "获取所有分类及其文章数量统计",
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "allOf": [
                          { "$ref": "#/components/schemas/Category" },
                          {
                            "type": "object",
                            "properties": {
                              "article_count": {
                                "type": "integer",
                                "description": "该分类下的文章数量"
                              }
                            }
                          }
                        ]
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/categories/options/select": {
      "get": {
        "tags": ["分类管理"],
        "summary": "获取分类选择项",
        "description": "获取用于表单选择器的分类列表",
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "slug": { "type": "string" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/categories/check/slug/{slug}": {
      "get": {
        "tags": ["分类管理"],
        "summary": "检查分类别名可用性",
        "description": "检查指定分类别名是否已存在",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "分类别名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "检查结果",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "available": { "type": "boolean", "description": "是否可用" },
                        "slug": { "type": "string", "description": "检查的别名" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/categories/batch/sort": {
      "put": {
        "tags": ["分类管理"],
        "summary": "批量更新分类排序",
        "description": "批量更新分类的排序顺序（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["categories"],
                "properties": {
                  "categories": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "sort_order": { "type": "integer" }
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/categories/batch/delete": {
      "delete": {
        "tags": ["分类管理"],
        "summary": "批量删除分类",
        "description": "批量删除多个分类（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["ids"],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "分类ID列表"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/articles/popular": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取热门文章",
        "description": "根据浏览量获取热门文章列表（公开访问）",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "获取数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "days",
            "in": "query",
            "description": "时间范围（天数）",
            "schema": { "type": "integer", "minimum": 1, "default": 30 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Article" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/articles/latest": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取最新文章",
        "description": "根据创建时间获取最新文章列表（公开访问）",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "获取数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "status",
            "in": "query",
            "description": "文章状态筛选：0-草稿，1-已发布",
            "schema": { "type": "integer", "enum": [0, 1], "default": 1 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Article" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/articles/statistics": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取文章统计信息",
        "description": "获取文章的统计数据（公开访问）",
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "文章总数", "example": 150 },
                        "published": {
                          "type": "integer",
                          "description": "已发布文章数",
                          "example": 120
                        },
                        "draft": { "type": "integer", "description": "草稿文章数", "example": 25 },
                        "deleted": {
                          "type": "integer",
                          "description": "已删除文章数",
                          "example": 5
                        },
                        "totalViews": {
                          "type": "integer",
                          "description": "总浏览量",
                          "example": 15000
                        },
                        "averageViews": {
                          "type": "number",
                          "description": "平均浏览量",
                          "example": 125.5
                        },
                        "byCategory": {
                          "type": "object",
                          "description": "按分类统计",
                          "additionalProperties": { "type": "integer" }
                        },
                        "byMonth": {
                          "type": "object",
                          "description": "按月份统计（最近12个月）",
                          "additionalProperties": { "type": "integer" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/articles/category/{slug}": {
      "get": {
        "tags": ["文章管理"],
        "summary": "根据分类别名获取文章",
        "description": "根据分类别名获取该分类下的文章列表（公开访问）",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "分类别名",
            "schema": { "type": "string" }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["created_at", "updated_at", "view_count"],
              "default": "created_at"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "DESC" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "category": { "$ref": "#/components/schemas/Category" },
                            "articles": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/Article" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "404": {
            "description": "分类不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/articles": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取文章列表",
        "description": "获取博客文章列表，支持分页、搜索和多维度筛选（分类、标签、作者、状态、关键词等）",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词（标题或内容）",
            "schema": { "type": "string" }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "author_id",
            "in": "query",
            "description": "作者ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "status",
            "in": "query",
            "description": "文章状态筛选",
            "schema": { "type": "integer", "enum": [0, 1, 2] }
          },
          {
            "name": "tag_ids",
            "in": "query",
            "description": "标签ID筛选，支持单个ID或逗号分隔的多个ID",
            "schema": { "type": "string" },
            "example": "1,2,3"
          },
          {
            "name": "tag_match_type",
            "in": "query",
            "description": "标签匹配类型：any-任意匹配，all-全部匹配",
            "schema": { "type": "string", "enum": ["any", "all"], "default": "any" }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["created_at", "updated_at", "view_count"],
              "default": "created_at"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "DESC" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "articles": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/Article" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["文章管理"],
        "summary": "创建文章",
        "description": "创建新的博客文章（需要登录）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArticleInput"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "文章创建成功" },
                    "data": { "$ref": "#/components/schemas/Article" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/articles/{id}": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取文章详情",
        "description": "根据ID获取文章详细信息，同时增加浏览次数",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Article" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["文章管理"],
        "summary": "更新文章",
        "description": "更新文章信息（需要登录，作者或管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ArticleInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "无权限修改",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["文章管理"],
        "summary": "删除文章",
        "description": "删除指定文章（需要登录，作者或管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "403": {
            "description": "无权限删除",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/articles/{id}/related": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取相关文章",
        "description": "根据文章ID获取相关文章列表（公开访问）",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "limit",
            "in": "query",
            "description": "获取数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 20, "default": 5 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Article" }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/articles/{id}/tags": {
      "get": {
        "tags": ["文章管理"],
        "summary": "获取文章的标签",
        "description": "获取指定文章的所有标签（公开访问）",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Tag" }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["文章管理"],
        "summary": "为文章添加标签",
        "description": "为指定文章添加标签（需要登录，作者或管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["tags"],
                "properties": {
                  "tags": {
                    "oneOf": [
                      {
                        "type": "array",
                        "description": "标签名称数组",
                        "items": { "type": "string" },
                        "example": ["Docker", "部署", "博客"]
                      },
                      {
                        "type": "array",
                        "description": "标签ID数组",
                        "items": { "type": "integer" },
                        "example": [1, 2, 3]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "标签添加成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "标签添加成功" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "added": { "type": "integer", "description": "添加的标签数量" },
                        "existing": { "type": "integer", "description": "已存在的标签数量" },
                        "tags": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Tag" }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "无权限操作",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["文章管理"],
        "summary": "设置文章标签",
        "description": "设置文章的标签（替换所有现有标签）（需要登录，作者或管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["tags"],
                "properties": {
                  "tags": {
                    "oneOf": [
                      {
                        "type": "array",
                        "description": "标签名称数组",
                        "items": { "type": "string" },
                        "example": ["Vue", "前端", "教程"]
                      },
                      {
                        "type": "array",
                        "description": "标签ID数组",
                        "items": { "type": "integer" },
                        "example": [4, 5, 6]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "标签设置成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "文章标签设置成功" },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Tag" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["文章管理"],
        "summary": "从文章移除标签",
        "description": "从指定文章移除指定标签（需要登录，作者或管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["tagIds"],
                "properties": {
                  "tagIds": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "要移除的标签ID数组",
                    "example": [1, 2]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "标签移除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "标签移除成功" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "removed": { "type": "integer", "description": "移除的标签数量" },
                        "remaining": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Tag" },
                          "description": "剩余的标签"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/articles/{id}/permanent": {
      "delete": {
        "tags": ["文章管理"],
        "summary": "永久删除文章",
        "description": "永久删除指定文章（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文章ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "永久删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "文章已永久删除" }
                  }
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          },
          "404": {
            "description": "文章不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/articles/batch/status": {
      "put": {
        "tags": ["文章管理"],
        "summary": "批量更新文章状态",
        "description": "批量更新多个文章的状态（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["ids", "status"],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "文章ID列表",
                    "example": [1, 2, 3, 4]
                  },
                  "status": {
                    "type": "integer",
                    "description": "新状态：0-草稿，1-已发布，2-已删除",
                    "enum": [0, 1, 2]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "批量更新完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "updated": { "type": "integer", "description": "更新成功数量" },
                        "failed": { "type": "integer", "description": "更新失败数量" },
                        "details": {
                          "type": "array",
                          "items": {
                            "type": "object",
                            "properties": {
                              "id": { "type": "integer" },
                              "success": { "type": "boolean" },
                              "error": { "type": "string", "nullable": true }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "需要管理员权限",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/articles/tags/{tagIds}": {
      "get": {
        "tags": ["文章管理"],
        "summary": "根据标签获取文章（GET方式）",
        "description": "根据标签ID获取文章列表，支持多种筛选条件和分页",
        "parameters": [
          {
            "name": "tagIds",
            "in": "path",
            "required": true,
            "description": "逗号分隔的标签ID列表",
            "schema": { "type": "string" },
            "example": "1,2,3"
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          },
          {
            "name": "matchType",
            "in": "query",
            "description": "标签匹配类型：any-任意匹配，all-全部匹配",
            "schema": { "type": "string", "enum": ["any", "all"], "default": "any" }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "author_id",
            "in": "query",
            "description": "作者ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "articles": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/Article" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/articles/by-tags": {
      "post": {
        "tags": ["文章管理"],
        "summary": "根据标签获取文章（POST方式）",
        "description": "根据标签ID获取文章列表，支持多种筛选条件和分页",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          },
          {
            "name": "matchType",
            "in": "query",
            "description": "标签匹配类型：any-任意匹配，all-全部匹配",
            "schema": { "type": "string", "enum": ["any", "all"], "default": "any" }
          },
          {
            "name": "category_id",
            "in": "query",
            "description": "分类ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "author_id",
            "in": "query",
            "description": "作者ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["tagIds"],
                "properties": {
                  "tagIds": {
                    "type": "array",
                    "description": "标签ID数组",
                    "items": { "type": "integer" },
                    "example": [1, 2, 3]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "articles": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/Article" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "参数错误",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },

    "/images": {
      "get": {
        "tags": ["图片管理"],
        "summary": "获取图片列表",
        "description": "获取图片列表，支持分页和筛选（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 20 }
          },
          {
            "name": "upload_type",
            "in": "query",
            "description": "上传类型筛选",
            "schema": { "type": "integer", "enum": [1, 2, 3, 4] }
          },
          {
            "name": "uploader_id",
            "in": "query",
            "description": "上传者ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词（文件名、描述等）",
            "schema": { "type": "string" }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["created_at", "updated_at", "file_size", "file_name"],
              "default": "created_at"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "DESC" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "images": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/Image" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/images/upload": {
      "post": {
        "tags": ["图片管理"],
        "summary": "上传图片",
        "description": "上传图片文件并保存到图片管理系统（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "image": {
                    "type": "string",
                    "format": "binary",
                    "description": "图片文件（支持jpg、png、gif、webp等格式，最大10MB）"
                  },
                  "file_name": {
                    "type": "string",
                    "description": "指定的文件名（可选）",
                    "example": "my-image.jpg"
                  },
                  "alt_text": {
                    "type": "string",
                    "description": "替代文本（可选）",
                    "example": "美丽的风景图片"
                  },
                  "description": {
                    "type": "string",
                    "description": "图片描述（可选）",
                    "example": "这是一张在海边拍摄的日落照片"
                  },
                  "tags": {
                    "type": "string",
                    "description": "图片标签（JSON字符串，可选）",
                    "example": "[\"风景\", \"日落\", \"海边\"]"
                  },
                  "upload_type": {
                    "type": "integer",
                    "description": "上传类型：1-分类图片，2-文章图片，3-用户头像，4-其他",
                    "enum": [1, 2, 3, 4],
                    "default": 1
                  },
                  "related_id": {
                    "type": "integer",
                    "description": "关联ID（分类ID、文章ID等，可选）"
                  }
                },
                "required": ["image"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "图片上传成功" },
                    "data": { "$ref": "#/components/schemas/Image" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "上传失败（文件格式不支持、文件过大、文件名已存在等）",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/images/{id}": {
      "get": {
        "tags": ["图片管理"],
        "summary": "获取图片详情",
        "description": "根据ID获取图片详细信息",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "图片ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Image" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "图片不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["图片管理"],
        "summary": "更新图片信息",
        "description": "更新图片的元数据信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "图片ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ImageInput"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "图片不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["图片管理"],
        "summary": "删除图片",
        "description": "删除指定图片（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "图片ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "hardDelete",
            "in": "query",
            "description": "是否物理删除文件",
            "schema": { "type": "boolean", "default": false }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          },
          "404": {
            "description": "图片不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      }
    },
    "/images/stats/statistics": {
      "get": {
        "tags": ["图片管理"],
        "summary": "获取图片统计信息",
        "description": "获取图片的统计数据（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "图片总数", "example": 150 },
                        "byType": {
                          "type": "object",
                          "description": "按类型统计",
                          "example": { "1": 30, "2": 80, "3": 25, "4": 15 }
                        },
                        "totalSize": {
                          "type": "integer",
                          "description": "总文件大小（字节）",
                          "example": 52428800
                        },
                        "averageSize": {
                          "type": "integer",
                          "description": "平均文件大小（字节）",
                          "example": 349525
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/images/type/{upload_type}/related/{related_id}": {
      "get": {
        "tags": ["图片管理"],
        "summary": "获取关联图片",
        "description": "根据上传类型和关联ID获取图片列表",
        "parameters": [
          {
            "name": "upload_type",
            "in": "path",
            "required": true,
            "description": "上传类型",
            "schema": { "type": "integer", "enum": [1, 2, 3, 4] }
          },
          {
            "name": "related_id",
            "in": "path",
            "required": true,
            "description": "关联ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Image" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config": {
      "get": {
        "tags": ["系统配置"],
        "summary": "获取系统配置列表",
        "description": "获取所有系统配置项（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/SystemConfig" }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["系统配置"],
        "summary": "创建系统配置",
        "description": "创建新的系统配置项（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["config_key", "config_value"],
                "properties": {
                  "config_key": {
                    "type": "string",
                    "description": "配置键名",
                    "example": "site_name"
                  },
                  "config_value": {
                    "type": "string",
                    "description": "配置值",
                    "example": "思琼碧落的博客"
                  },
                  "config_type": {
                    "type": "integer",
                    "description": "配置类型：1-字符串，2-数字，3-JSON，4-布尔值",
                    "enum": [1, 2, 3, 4],
                    "default": 1
                  },
                  "description": {
                    "type": "string",
                    "description": "配置描述",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "配置创建成功" },
                    "data": { "$ref": "#/components/schemas/SystemConfig" }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/tags": {
      "get": {
        "tags": ["标签管理"],
        "summary": "获取标签列表",
        "description": "获取所有标签或分页获取标签列表",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码（可选，不提供则返回所有标签）",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量（可选）",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["article_count", "created_at", "name"],
              "default": "article_count"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "DESC" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tags": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Tag" }
                        },
                        "pagination": {
                          "$ref": "#/components/schemas/Pagination"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": ["标签管理"],
        "summary": "创建标签",
        "description": "创建新标签（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": { "$ref": "#/components/schemas/TagInput" }
            }
          }
        },
        "responses": {
          "201": {
            "description": "创建成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "标签创建成功" },
                    "data": { "$ref": "#/components/schemas/Tag" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "请求参数错误",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/tags/select": {
      "get": {
        "tags": ["标签管理"],
        "summary": "获取标签选择项",
        "description": "获取用于表单选择器的标签列表（公开访问）",
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "integer" },
                          "name": { "type": "string" },
                          "slug": { "type": "string" },
                          "color": { "type": "string" },
                          "article_count": { "type": "integer" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/tags/slug/{slug}": {
      "get": {
        "tags": ["标签管理"],
        "summary": "根据别名获取标签详情",
        "description": "根据标签别名获取标签详细信息（公开访问）",
        "parameters": [
          {
            "name": "slug",
            "in": "path",
            "required": true,
            "description": "标签别名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Tag" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "标签不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/tags/{id}": {
      "get": {
        "tags": ["标签管理"],
        "summary": "获取标签详情",
        "description": "根据ID获取标签详细信息",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "标签ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Tag" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "标签不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["标签管理"],
        "summary": "更新标签信息",
        "description": "更新标签信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "标签ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": { "type": "string", "description": "标签名称" },
                  "slug": { "type": "string", "description": "标签别名" },
                  "description": { "type": "string", "description": "标签描述" },
                  "color": { "type": "string", "description": "标签颜色" },
                  "icon": { "type": "string", "description": "标签图标" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["标签管理"],
        "summary": "删除标签",
        "description": "删除标签（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "标签ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/tags/{id}/articles": {
      "get": {
        "tags": ["标签管理"],
        "summary": "获取标签的文章列表",
        "description": "获取使用指定标签的文章列表",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "标签ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "tag": { "$ref": "#/components/schemas/Tag" },
                        "articles": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Article" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "获取音乐列表",
        "description": "获取音乐文件列表，支持分页和筛选（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100 }
          },
          {
            "name": "status",
            "in": "query",
            "description": "状态筛选：0-禁用，1-启用",
            "schema": { "type": "integer", "enum": [0, 1] }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "关键词搜索",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "music": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/upload": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "上传音乐文件",
        "description": "上传单个音乐文件（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": ["music"],
                "properties": {
                  "music": {
                    "type": "string",
                    "format": "binary",
                    "description": "音乐文件（支持 .mp3, .wav, .flac, .m4a, .aac）"
                  },
                  "file_name": {
                    "type": "string",
                    "description": "自定义文件名（可选）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "音乐文件上传成功" },
                    "data": { "$ref": "#/components/schemas/Music" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "文件格式不支持或其他错误",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/music/enabled": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "获取启用的音乐列表",
        "description": "获取所有启用状态的音乐文件列表，不需要认证",
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Music" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/random": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "随机获取音乐",
        "description": "随机获取一首或多首音乐（公开访问）",
        "parameters": [
          {
            "name": "count",
            "in": "query",
            "description": "获取数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 10, "default": 1 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Music" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/statistics": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "获取音乐统计信息",
        "description": "获取音乐文件的统计数据（公开访问）",
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "音乐总数", "example": 150 },
                        "enabled": {
                          "type": "integer",
                          "description": "启用的音乐数",
                          "example": 120
                        },
                        "disabled": {
                          "type": "integer",
                          "description": "禁用的音乐数",
                          "example": 30
                        },
                        "totalSize": {
                          "type": "integer",
                          "description": "总文件大小（字节）",
                          "example": 524288000
                        },
                        "averageSize": {
                          "type": "integer",
                          "description": "平均文件大小（字节）",
                          "example": 3495253
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/artist/{artist}": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "根据艺术家获取音乐",
        "description": "根据艺术家名称获取音乐列表（公开访问）",
        "parameters": [
          {
            "name": "artist",
            "in": "path",
            "required": true,
            "description": "艺术家名称",
            "schema": { "type": "string" },
            "example": "周杰伦"
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "music": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/album/{album}": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "根据专辑获取音乐",
        "description": "根据专辑名称获取音乐列表（公开访问）",
        "parameters": [
          {
            "name": "album",
            "in": "path",
            "required": true,
            "description": "专辑名称",
            "schema": { "type": "string" },
            "example": "范特西"
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "music": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/genre/{genre}": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "根据流派获取音乐",
        "description": "根据音乐流派获取音乐列表（公开访问）",
        "parameters": [
          {
            "name": "genre",
            "in": "path",
            "required": true,
            "description": "音乐流派",
            "schema": { "type": "string" },
            "example": "Pop"
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "music": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/popular": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "获取最热门音乐",
        "description": "根据播放次数获取最热门的音乐列表（公开访问）",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "description": "获取数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/Music" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/uploader/{uploaderId}": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "根据上传者获取音乐",
        "description": "根据上传者ID获取音乐列表（公开访问）",
        "parameters": [
          {
            "name": "uploaderId",
            "in": "path",
            "required": true,
            "description": "上传者ID",
            "schema": { "type": "integer" },
            "example": 1
          },
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 50, "default": 10 }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "music": {
                          "type": "array",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "pagination": { "$ref": "#/components/schemas/Pagination" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/{id}": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "获取音乐详情",
        "description": "根据ID获取音乐文件详细信息（公开访问）",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "音乐ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/Music" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "音乐文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["音乐管理"],
        "summary": "更新音乐信息",
        "description": "更新音乐文件信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "音乐ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "status": {
                    "type": "integer",
                    "description": "状态：0-禁用，1-启用",
                    "enum": [0, 1]
                  },
                  "title": { "type": "string", "description": "音乐标题" },
                  "artist": { "type": "string", "description": "艺术家" },
                  "album": { "type": "string", "description": "专辑" },
                  "description": { "type": "string", "description": "描述" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "404": {
            "description": "音乐文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["音乐管理"],
        "summary": "删除音乐文件",
        "description": "删除指定音乐文件（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "音乐ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "404": {
            "description": "音乐文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/music/{id}/toggle": {
      "patch": {
        "tags": ["音乐管理"],
        "summary": "切换音乐状态",
        "description": "切换音乐的启用/禁用状态（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "音乐ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "状态切换成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "音乐状态切换成功" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "status": { "type": "integer", "description": "新状态" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/{id}/validate": {
      "get": {
        "tags": ["音乐管理"],
        "summary": "验证音乐文件",
        "description": "验证指定音乐文件是否存在且完整（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "音乐ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "验证完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "id": { "type": "integer" },
                        "valid": { "type": "boolean", "description": "文件是否有效" },
                        "exists": { "type": "boolean", "description": "文件是否存在" },
                        "message": { "type": "string", "description": "验证结果描述" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/batch/status": {
      "put": {
        "tags": ["音乐管理"],
        "summary": "批量更新音乐状态",
        "description": "批量更新多个音乐文件的状态（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["ids", "status"],
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "音乐ID列表",
                    "example": [1, 2, 3, 4]
                  },
                  "status": {
                    "type": "integer",
                    "description": "新状态：0-禁用，1-启用",
                    "enum": [0, 1]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "批量更新完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "updated": { "type": "integer", "description": "更新成功数量" },
                        "failed": { "type": "integer", "description": "更新失败数量" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/batch/import": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "批量导入音乐",
        "description": "扫描并导入音乐目录中的文件（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "导入完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "音乐导入完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "imported": { "type": "integer", "description": "导入成功数量" },
                        "skipped": { "type": "integer", "description": "跳过数量" },
                        "failed": { "type": "integer", "description": "导入失败数量" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/batch/validate": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "批量验证音乐文件",
        "description": "批量验证音乐文件的完整性（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": false,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "ids": {
                    "type": "array",
                    "items": { "type": "integer" },
                    "description": "音乐ID列表（可选，不提供则验证所有）"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "验证完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "批量验证完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "总验证数量" },
                        "valid": { "type": "integer", "description": "有效文件数量" },
                        "invalid": { "type": "integer", "description": "无效文件数量" },
                        "missing": { "type": "integer", "description": "丢失文件数量" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/music/upload/single": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "上传单个音乐文件",
        "description": "上传单个音乐文件到服务器并自动创建数据库记录（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "music": {
                    "type": "string",
                    "format": "binary",
                    "description": "音乐文件（支持mp3、wav、flac、m4a、aac格式，最大50MB）"
                  },
                  "file_name": {
                    "type": "string",
                    "description": "指定的文件名（可选），如果不提供则使用原始文件名",
                    "example": "我的音乐.mp3"
                  }
                },
                "required": ["music"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "音乐文件上传成功" },
                    "data": { "$ref": "#/components/schemas/Music" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "上传失败（文件格式不支持、文件过大、文件名已存在等）",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/music/upload/multiple": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "批量上传音乐文件",
        "description": "批量上传多个音乐文件到服务器并自动创建数据库记录（需要管理员权限，最多5个文件）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "music": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "binary"
                    },
                    "description": "音乐文件数组（支持mp3、wav、flac、m4a、aac格式，每个文件最大50MB，最多5个文件）"
                  }
                },
                "required": ["music"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "批量上传完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": {
                      "type": "string",
                      "example": "批量上传完成。成功：3个，失败：1个"
                    },
                    "data": {
                      "type": "object",
                      "properties": {
                        "successful": {
                          "type": "array",
                          "description": "成功上传的文件列表",
                          "items": { "$ref": "#/components/schemas/Music" }
                        },
                        "failed": {
                          "type": "array",
                          "description": "上传失败的文件列表",
                          "items": {
                            "type": "object",
                            "properties": {
                              "original_name": { "type": "string" },
                              "error": { "type": "string" }
                            }
                          }
                        },
                        "total": { "type": "integer", "description": "总文件数" },
                        "successCount": { "type": "integer", "description": "成功数量" },
                        "failureCount": { "type": "integer", "description": "失败数量" }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "批量上传失败",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/music/refresh": {
      "post": {
        "tags": ["音乐管理"],
        "summary": "刷新音乐表",
        "description": "重新扫描音乐目录并更新数据库记录（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "刷新完成",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "音乐表刷新完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "scanned": { "type": "integer", "description": "扫描文件数" },
                        "added": { "type": "integer", "description": "新增记录数" },
                        "updated": { "type": "integer", "description": "更新记录数" },
                        "removed": { "type": "integer", "description": "移除记录数" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/blog/settings": {
      "get": {
        "tags": ["系统配置"],
        "summary": "获取博客基本设置",
        "description": "获取博客的基本配置信息（公开访问）",
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "site_name": { "type": "string", "example": "思琼碧落的博客" },
                        "site_description": { "type": "string", "example": "个人技术博客" },
                        "site_logo": { "type": "string", "example": "/static/image/logo.png" },
                        "site_author": { "type": "string", "example": "思琼碧落" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["系统配置"],
        "summary": "保存博客设置",
        "description": "批量保存博客基本设置（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "site_name": { "type": "string", "description": "网站名称" },
                  "site_description": { "type": "string", "description": "网站描述" },
                  "site_logo": { "type": "string", "description": "网站Logo" },
                  "site_author": { "type": "string", "description": "网站作者" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "保存成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/config/value/{key}": {
      "get": {
        "tags": ["系统配置"],
        "summary": "获取指定配置值",
        "description": "根据配置键名获取配置值（公开访问）",
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "required": true,
            "description": "配置键名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "key": { "type": "string" },
                        "value": { "type": "string" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/values/batch": {
      "post": {
        "tags": ["系统配置"],
        "summary": "批量获取配置值",
        "description": "根据配置键名列表批量获取配置值（公开访问）",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["keys"],
                "properties": {
                  "keys": {
                    "type": "array",
                    "items": { "type": "string" },
                    "description": "配置键名列表",
                    "example": ["site_name", "site_description", "site_logo"]
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "additionalProperties": { "type": "string" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/statistics": {
      "get": {
        "tags": ["系统配置"],
        "summary": "获取配置统计",
        "description": "获取系统配置的统计信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "总配置数量" },
                        "byType": {
                          "type": "object",
                          "description": "按类型统计",
                          "additionalProperties": { "type": "integer" }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/{id}": {
      "get": {
        "tags": ["系统配置"],
        "summary": "根据ID获取配置项",
        "description": "根据配置ID获取配置详情（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "配置ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/SystemConfig" }
                  }
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["系统配置"],
        "summary": "更新配置项",
        "description": "根据ID更新配置项（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "配置ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "config_value": { "type": "string", "description": "配置值" },
                  "description": { "type": "string", "description": "配置描述" }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["系统配置"],
        "summary": "删除配置项",
        "description": "根据ID删除配置项（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "配置ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/config/key/{key}": {
      "get": {
        "tags": ["系统配置"],
        "summary": "获取配置值",
        "description": "根据配置键名获取配置值",
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "required": true,
            "description": "配置键名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/SystemConfig" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "配置不存在",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ErrorResponse"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["系统配置"],
        "summary": "更新配置值",
        "description": "更新指定配置项的值（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "required": true,
            "description": "配置键名",
            "schema": { "type": "string" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["config_value"],
                "properties": {
                  "config_value": {
                    "type": "string",
                    "description": "新的配置值"
                  },
                  "description": {
                    "type": "string",
                    "description": "配置描述",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["系统配置"],
        "summary": "删除配置项",
        "description": "删除指定配置项（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "required": true,
            "description": "配置键名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SuccessResponse"
                }
              }
            }
          }
        }
      }
    },
    "/config/check/key/{key}": {
      "get": {
        "tags": ["系统配置"],
        "summary": "检查配置键可用性",
        "description": "检查指定配置键是否已存在（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "key",
            "in": "path",
            "required": true,
            "description": "配置键名",
            "schema": { "type": "string" }
          }
        ],
        "responses": {
          "200": {
            "description": "检查结果",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "available": { "type": "boolean", "description": "是否可用" },
                        "key": { "type": "string", "description": "检查的键名" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/type/{type}": {
      "get": {
        "tags": ["系统配置"],
        "summary": "根据类型获取配置项",
        "description": "根据配置类型获取配置项列表（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "required": true,
            "description": "配置类型",
            "schema": { "type": "integer", "enum": [1, 2, 3, 4] }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "array",
                      "items": { "$ref": "#/components/schemas/SystemConfig" }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/batch/set": {
      "post": {
        "tags": ["系统配置"],
        "summary": "批量设置配置值",
        "description": "批量设置多个配置项的值（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["configs"],
                "properties": {
                  "configs": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "properties": {
                        "key": { "type": "string", "description": "配置键" },
                        "value": { "type": "string", "description": "配置值" }
                      }
                    },
                    "description": "配置项列表"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "批量设置成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "批量设置完成" },
                    "data": {
                      "type": "object",
                      "properties": {
                        "updated": { "type": "integer", "description": "更新数量" },
                        "failed": { "type": "integer", "description": "失败数量" }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/config/reset/defaults": {
      "post": {
        "tags": ["系统配置"],
        "summary": "重置配置到默认值",
        "description": "重置系统配置到默认值（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "重置成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          }
        }
      }
    },
    "/files": {
      "get": {
        "tags": ["文件管理"],
        "summary": "获取文件列表",
        "description": "获取文件列表，支持分页和筛选（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "页码",
            "schema": { "type": "integer", "minimum": 1, "default": 1 }
          },
          {
            "name": "pageSize",
            "in": "query",
            "description": "每页数量",
            "schema": { "type": "integer", "minimum": 1, "maximum": 100, "default": 20 }
          },
          {
            "name": "file_type",
            "in": "query",
            "description": "文件类型筛选",
            "schema": {
              "type": "string",
              "enum": ["document", "video", "audio", "archive", "other"]
            }
          },
          {
            "name": "uploader_id",
            "in": "query",
            "description": "上传者ID筛选",
            "schema": { "type": "integer" }
          },
          {
            "name": "keyword",
            "in": "query",
            "description": "搜索关键词（文件名、描述等）",
            "schema": { "type": "string" }
          },
          {
            "name": "orderBy",
            "in": "query",
            "description": "排序字段",
            "schema": {
              "type": "string",
              "enum": ["created_at", "updated_at", "file_size", "file_name"],
              "default": "created_at"
            }
          },
          {
            "name": "order",
            "in": "query",
            "description": "排序方向",
            "schema": { "type": "string", "enum": ["ASC", "DESC"], "default": "DESC" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "allOf": [
                    { "$ref": "#/components/schemas/PaginationResponse" },
                    {
                      "type": "object",
                      "properties": {
                        "data": {
                          "type": "object",
                          "properties": {
                            "files": {
                              "type": "array",
                              "items": { "$ref": "#/components/schemas/File" }
                            }
                          }
                        }
                      }
                    }
                  ]
                }
              }
            }
          }
        }
      }
    },
    "/files/upload": {
      "post": {
        "tags": ["文件管理"],
        "summary": "上传文件",
        "description": "上传通用文件并保存到文件管理系统（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "文件（支持多种格式，最大100MB）"
                  },
                  "file_name": {
                    "type": "string",
                    "description": "指定的文件名（可选）",
                    "example": "重要文档.pdf"
                  },
                  "description": {
                    "type": "string",
                    "description": "文件描述（可选）",
                    "example": "这是一个重要的技术文档"
                  },
                  "tags": {
                    "type": "string",
                    "description": "文件标签（JSON字符串，可选）",
                    "example": "[\"技术\", \"文档\", \"重要\"]"
                  },
                  "related_id": {
                    "type": "integer",
                    "description": "关联ID（文章ID、分类ID等，可选）"
                  }
                },
                "required": ["file"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "上传成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "message": { "type": "string", "example": "文件上传成功" },
                    "data": { "$ref": "#/components/schemas/File" }
                  }
                }
              }
            }
          },
          "400": {
            "description": "上传失败（文件格式不支持、文件过大等）",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/files/{id}": {
      "get": {
        "tags": ["文件管理"],
        "summary": "获取文件详情",
        "description": "根据ID获取文件详细信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文件ID",
            "schema": { "type": "integer" }
          }
        ],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": { "$ref": "#/components/schemas/File" }
                  }
                }
              }
            }
          },
          "404": {
            "description": "文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "put": {
        "tags": ["文件管理"],
        "summary": "更新文件信息",
        "description": "更新文件的元数据信息（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文件ID",
            "schema": { "type": "integer" }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "description": {
                    "type": "string",
                    "description": "文件描述",
                    "example": "更新后的文件描述"
                  },
                  "tags": {
                    "type": "array",
                    "description": "文件标签",
                    "items": { "type": "string" },
                    "example": ["技术", "文档", "更新"]
                  },
                  "related_id": {
                    "type": "integer",
                    "description": "关联ID",
                    "nullable": true
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "更新成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "404": {
            "description": "文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      },
      "delete": {
        "tags": ["文件管理"],
        "summary": "删除文件",
        "description": "删除指定文件（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "文件ID",
            "schema": { "type": "integer" }
          },
          {
            "name": "hardDelete",
            "in": "query",
            "description": "是否物理删除文件",
            "schema": { "type": "boolean", "default": false }
          }
        ],
        "responses": {
          "200": {
            "description": "删除成功",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/SuccessResponse" }
              }
            }
          },
          "404": {
            "description": "文件不存在",
            "content": {
              "application/json": {
                "schema": { "$ref": "#/components/schemas/ErrorResponse" }
              }
            }
          }
        }
      }
    },
    "/files/stats/overview": {
      "get": {
        "tags": ["文件管理"],
        "summary": "获取文件统计信息",
        "description": "获取文件的统计数据（需要管理员权限）",
        "security": [{ "bearerAuth": [] }],
        "responses": {
          "200": {
            "description": "获取成功",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": { "type": "boolean", "example": true },
                    "data": {
                      "type": "object",
                      "properties": {
                        "total": { "type": "integer", "description": "文件总数", "example": 200 },
                        "byType": {
                          "type": "object",
                          "description": "按类型统计",
                          "example": {
                            "document": 120,
                            "video": 30,
                            "audio": 25,
                            "archive": 15,
                            "other": 10
                          }
                        },
                        "totalSize": {
                          "type": "integer",
                          "description": "总文件大小（字节）",
                          "example": 1073741824
                        },
                        "averageSize": {
                          "type": "integer",
                          "description": "平均文件大小（字节）",
                          "example": 5368709
                        },
                        "totalDownloads": {
                          "type": "integer",
                          "description": "总下载次数",
                          "example": 1500
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "系统信息",
      "description": "系统基本信息和状态"
    },
    {
      "name": "用户管理",
      "description": "用户认证、个人信息管理"
    },
    {
      "name": "分类管理",
      "description": "博客分类的增删改查和图片管理"
    },
    {
      "name": "文章管理",
      "description": "博客文章的增删改查和发布管理"
    },
    {
      "name": "音乐管理",
      "description": "音乐文件的上传和管理"
    },
    {
      "name": "图片管理",
      "description": "图片文件的上传和管理"
    },
    {
      "name": "系统配置",
      "description": "系统配置参数管理"
    },
    {
      "name": "标签管理",
      "description": "博客标签的增删改查和关联管理"
    },
    {
      "name": "文件管理",
      "description": "通用文件的上传和管理"
    }
  ]
}
