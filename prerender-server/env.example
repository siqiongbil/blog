# ========================================
# Prerender 服务器环境变量配置模板
# ========================================
# 
# 复制此文件为 .env 并根据实际情况修改配置值
# 
# 生产环境推荐配置：
# - NODE_ENV=production
# - ENABLE_LOGGING=true
# - ENABLE_MONITORING=true
# - ENABLE_CACHE=true
# - ENABLE_SECURITY=true
# - MAX_MEMORY_USAGE=2048
# - ENABLE_HEALTH_CHECK=true
# - ENABLE_RATE_LIMITING=true
# - ENABLE_COMPRESSION=true
# - ENABLE_SSL=true (如果使用HTTPS)
#
# 开发环境推荐配置：
# - NODE_ENV=development
# - ENABLE_DEBUG=true
# - ENABLE_CHROME_DEBUG=true
# - LOG_LEVEL=debug
# - ENABLE_ACCESS_LOG=true
# - ENABLE_RATE_LIMITING=false
# - ENABLE_MONITORING=false

# ===========================================
# 基础配置
# ===========================================

# 预渲染服务器端口
PRERENDER_PORT=3000

# 运行环境 (development, production, test)
NODE_ENV=production

# ===========================================
# Chrome 浏览器配置
# ===========================================

# Chrome 可执行文件路径
# Linux: /usr/bin/google-chrome-stable 或 /usr/bin/chromium-browser
# Windows: C:\\Program Files\\Google\\Chrome\\Application\\chrome.exe
# macOS: /Applications/Google Chrome.app/Contents/MacOS/Google Chrome
CHROME_BIN=/usr/bin/google-chrome-stable

# Puppeteer 配置
PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=true
PUPPETEER_EXECUTABLE_PATH=/usr/bin/google-chrome-stable

# ===========================================
# 性能配置
# ===========================================

# 页面加载超时时间（毫秒）
PAGE_LOAD_TIMEOUT=30000

# 最后一个请求完成后等待时间（毫秒）
WAIT_AFTER_LAST_REQUEST=2000

# 页面完成检查超时时间（毫秒）
PAGE_DONE_CHECK_TIMEOUT=1000

# 页面完成检查间隔（毫秒）
PAGE_DONE_CHECK_INTERVAL=100

# ===========================================
# 缓存配置
# ===========================================

# 缓存最大存活时间（秒）
CACHE_MAX_AGE=86400

# 内存缓存大小（条目数）
MEMORY_CACHE_SIZE=100

# 缓存清理间隔（毫秒）
CACHE_CLEANUP_INTERVAL=3600000

# ===========================================
# 域名白名单配置
# ===========================================

# 允许预渲染的域名列表（逗号分隔）
# 请替换为您的实际域名
ALLOWED_DOMAINS=example.com,www.example.com

# ===========================================
# 爬虫检测配置
# ===========================================

# 是否启用爬虫检测
ENABLE_BOT_DETECTION=true

# 是否启用 User-Agent 重写
ENABLE_USER_AGENT_REWRITE=true

# 是否启用请求头处理
ENABLE_REQUEST_HEADERS=true

# ===========================================
# 渲染配置
# ===========================================

# 是否启用 Vue 应用检测
ENABLE_VUE_APP_DETECTION=true

# Vue 应用等待时间（毫秒）
VUE_APP_WAIT_TIME=2000

# 是否启用网络空闲等待
ENABLE_NETWORK_IDLE_WAIT=true

# 网络空闲超时时间（毫秒）
NETWORK_IDLE_TIMEOUT=5000

# ===========================================
# 错误处理配置
# ===========================================

# 是否启用错误处理
ENABLE_ERROR_HANDLING=true

# 是否启用超时处理
ENABLE_TIMEOUT_HANDLING=true

# 最大重试次数
MAX_RETRY_ATTEMPTS=3

# 重试延迟时间（毫秒）
RETRY_DELAY=1000

# ===========================================
# 日志配置
# ===========================================

# 日志级别 (error, warn, info, debug)
LOG_LEVEL=info

# 是否记录请求日志
LOG_REQUESTS=true

# 是否记录错误日志
LOG_ERRORS=true

# 是否启用访问日志
ENABLE_ACCESS_LOG=true

# ===========================================
# 安全配置
# ===========================================

# 是否启用域名白名单
ENABLE_WHITELIST=true

# 是否启用速率限制
ENABLE_RATE_LIMITING=false

# 速率限制时间窗口（毫秒）
RATE_LIMIT_WINDOW=60000

# 速率限制最大请求数
RATE_LIMIT_MAX_REQUESTS=100

# ===========================================
# 监控配置
# ===========================================

# 是否启用健康检查
ENABLE_HEALTH_CHECK=true

# 健康检查间隔（毫秒）
HEALTH_CHECK_INTERVAL=30000

# 是否启用指标监控
ENABLE_METRICS=false

# 指标监控端口
METRICS_PORT=9090

# ===========================================
# 资源限制
# ===========================================

# 最大内存使用量（MB）
MAX_MEMORY_USAGE=2048

# 最大 CPU 使用率（%）
MAX_CPU_USAGE=100

# 是否启用资源监控
ENABLE_RESOURCE_MONITORING=true

# ===========================================
# 网络代理配置（可选）
# ===========================================

# 代理服务器主机
# PROXY_HOST=proxy.example.com

# 代理服务器端口
# PROXY_PORT=8080

# 代理用户名（如需要）
# PROXY_USERNAME=username

# 代理密码（如需要）
# PROXY_PASSWORD=password

# 是否启用代理
ENABLE_PROXY=false

# ===========================================
# SSL 配置（可选）
# ===========================================

# 是否启用 SSL
ENABLE_SSL=false

# SSL 证书路径
# SSL_CERT_PATH=/path/to/cert.pem

# SSL 私钥路径
# SSL_KEY_PATH=/path/to/key.pem

# ===========================================
# 压缩配置
# ===========================================

# 是否启用压缩
ENABLE_COMPRESSION=true

# 是否启用 Gzip 压缩
ENABLE_GZIP=true

# Gzip 压缩级别 (1-9)
GZIP_LEVEL=6

# 是否启用 Brotli 压缩
ENABLE_BROTLI=false

# ===========================================
# 调试配置
# ===========================================

# 是否启用调试模式
ENABLE_DEBUG=false

# 调试端口
DEBUG_PORT=9222

# 是否启用 Chrome 调试
ENABLE_CHROME_DEBUG=false

# ===========================================
# User-Agent 配置
# ===========================================

# 默认 User-Agent
DEFAULT_USER_AGENT="Mozilla/5.0 (compatible; PrerenderBot/1.0; +https://example.com/bot.html)"

# Google 爬虫 User-Agent
GOOGLEBOT_USER_AGENT="Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"

# Bing 爬虫 User-Agent
BINGBOT_USER_AGENT="Mozilla/5.0 (compatible; bingbot/2.0; +http://www.bing.com/bingbot.htm)"

# 百度爬虫 User-Agent
BAIDUSPIDER_USER_AGENT="Mozilla/5.0 (compatible; Baiduspider/2.0; +http://www.baidu.com/search/spider.html)"

# ===========================================
# 社交媒体爬虫配置
# ===========================================

# 是否启用社交媒体爬虫支持
ENABLE_SOCIAL_MEDIA_BOTS=true

# Facebook 爬虫 User-Agent
FACEBOOK_USER_AGENT="facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)"

# Twitter 爬虫 User-Agent
TWITTER_USER_AGENT="Twitterbot/1.0"

# LinkedIn 爬虫 User-Agent
LINKEDIN_USER_AGENT="LinkedInBot/1.0 (compatible; Mozilla/5.0; Apache-HttpClient +http://www.linkedin.com)"

# WhatsApp 爬虫 User-Agent
WHATSAPP_USER_AGENT="WhatsApp/2.19.81 A"

# Telegram 爬虫 User-Agent
TELEGRAM_USER_AGENT="TelegramBot (like TwitterBot)"

# ===========================================
# 缓存策略配置
# ===========================================

# Google 爬虫缓存时间（秒）
GOOGLE_CACHE_TIME=3600

# Bing 爬虫缓存时间（秒）
BING_CACHE_TIME=1800

# 百度爬虫缓存时间（秒）
BAIDU_CACHE_TIME=1200

# 默认缓存时间（秒）
DEFAULT_CACHE_TIME=600

# ===========================================
# 响应头配置
# ===========================================

# 是否启用自定义响应头
ENABLE_CUSTOM_HEADERS=true

# 自定义缓存控制头
CUSTOM_CACHE_CONTROL=private,max-age=600,must-revalidate

# 自定义 X-Prerender 头
CUSTOM_X_PRERENDER=1

# 自定义 Vary 头
CUSTOM_VARY=User-Agent

# ===========================================
# 插件配置
# ===========================================

# 是否启用移除脚本标签插件
ENABLE_REMOVE_SCRIPT_TAGS=true

# 是否启用 HTTP 头插件
ENABLE_HTTP_HEADERS=true

# 是否启用内存缓存插件
ENABLE_MEMORY_CACHE=true

# 是否启用白名单插件
ENABLE_WHITELIST_PLUGIN=true

# ===========================================
# 容器配置（Docker 环境）
# ===========================================

# 是否运行在 Docker 模式
DOCKER_MODE=true

# 容器名称
CONTAINER_NAME=prerender-server

# Docker 网络名称
DOCKER_NETWORK=prerender-network

# Docker 日志卷路径
DOCKER_VOLUME_LOGS=./logs

# ===========================================
# 备份配置（可选）
# ===========================================

# 是否启用备份
ENABLE_BACKUP=false

# 备份间隔（毫秒）
# BACKUP_INTERVAL=86400000

# 备份路径
# BACKUP_PATH=./backups

# ===========================================
# 通知配置（可选）
# ===========================================

# 是否启用通知
ENABLE_NOTIFICATIONS=false

# Slack Webhook URL（如需要）
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Discord Webhook URL（如需要）
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR/DISCORD/WEBHOOK

# 是否启用邮件通知
EMAIL_NOTIFICATIONS=false

# SMTP 服务器配置（如启用邮件通知）
# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=your-email@example.com
# SMTP_PASS=your-email-password

# ===========================================
# 自定义配置（可选）
# ===========================================

# 自定义配置文件路径
# CUSTOM_CONFIG_PATH=./config/custom.json

# 是否启用自定义插件
ENABLE_CUSTOM_PLUGINS=false

# 插件目录路径
# PLUGINS_DIRECTORY=./plugins

# ===========================================
# 注意事项
# ===========================================
# 1. 请根据实际部署环境修改相关配置
# 2. 生产环境请确保正确配置域名白名单
# 3. 建议启用日志记录和监控功能
# 4. 根据服务器性能调整资源限制配置
# 5. 如使用代理，请确保代理服务器稳定可用
# 6. SSL 配置仅在需要 HTTPS 时启用
# 7. 备份和通知功能为可选配置
# 8. 自定义插件需要额外开发和配置
# 9. Docker 环境下请注意路径映射
# 10. 定期检查和更新 Chrome 浏览器版本
